---
import Base from "@/layouts/Base.astro";
import { getCollection } from "astro:content";

// Get blog posts about credit cards
const allPosts = await getCollection("blog");
const creditCardPosts = allPosts.filter(
  (post) =>
    post.data.categories?.includes("credit-cards") ||
    post.data.title.toLowerCase().includes("credit card") ||
    post.data.title.toLowerCase().includes("cashback") ||
    post.data.title.toLowerCase().includes("rewards"),
);

const meta = {
  title: "Tus Recomendaciones Personalizadas de Tarjetas de Cr√©dito",
  description:
    "Seg√∫n los resultados de tu cuestionario, aqu√≠ est√°n las tarjetas de cr√©dito que mejor se adaptan a tus necesidades financieras y estilo de vida.",
};
---

<Base meta_title={meta.title} description={meta.description}>
  <section class="section-sm">
    <div class="container">
      <div class="row">
        <div class="mx-auto lg:col-10">
          <!-- Success Banner -->
          <div
            class="bg-[#7ED321] bg-opacity-10 border-2 border-[#7ED321] rounded-lg p-6 mb-8 text-center"
          >
            <svg
              class="w-16 h-16 mx-auto mb-4 text-[#7ED321]"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"></path>
            </svg>
            <h1 class="h2 mb-3">¬°Gracias por Completar el Cuestionario!</h1>
            <p class="text-lg">
              Hemos analizado tus preferencias y encontrado las tarjetas de
              cr√©dito perfectas para ti.
            </p>
          </div>

          <!-- Results Introduction -->
          <div class="mb-10 text-center">
            <h2 class="h3 mb-4">
              Tus Recomendaciones Personalizadas de Tarjetas de Cr√©dito
            </h2>
            <p class="text-gray-600">
              Seg√∫n tus respuestas al cuestionario, hemos seleccionado una
              selecci√≥n de tarjetas de cr√©dito que se alinean con tus metas
              financieras y estilo de vida. Cada recomendaci√≥n incluye
              informaci√≥n detallada para ayudarte a tomar una decisi√≥n
              informada.
            </p>
          </div>

          <!-- Credit Card Articles -->
          <div class="space-y-6 mb-10">
            <h3 class="h4 text-primary mb-4">Lectura Recomendada:</h3>
            {
              creditCardPosts.map((post) => (
                <article class="bg-white rounded-lg shadow-md p-6 hover: transition-shadow">
                  <h4 class="h5 mb-2">
                    <a
                      href={`/blog/${post.id}`}
                      class="text-dark hover:text-primary transition-colors"
                    >
                      {post.data.title}
                    </a>
                  </h4>
                  <p class="text-gray-600 mb-3">{post.data.description}</p>
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-500">
                      {post.data.categories?.join(", ")}
                    </span>
                    <a
                      href={`/blog/${post.id}`}
                      class="btn btn-sm btn-outline-primary"
                    >
                      Leer M√°s ‚Üí
                    </a>
                  </div>
                </article>
              ))
            }
          </div>

          <!-- Next Steps -->
          <div class="bg-gray-50 rounded-lg p-8 text-center">
            <h3 class="h4 mb-4">¬øQu√© Sigue?</h3>
            <div class="grid md:grid-cols-3 gap-6 mb-6">
              <div class="bg-white rounded-lg p-4">
                <div class="text-3xl mb-2">üìö</div>
                <h4 class="font-bold mb-2">Aprende M√°s</h4>
                <p class="text-sm text-gray-600">
                  Lee nuestras gu√≠as detalladas para entender las
                  caracter√≠sticas de las tarjetas de cr√©dito
                </p>
              </div>
              <div class="bg-white rounded-lg p-4">
                <div class="text-3xl mb-2">üîç</div>
                <h4 class="font-bold mb-2">Compara Opciones</h4>
                <p class="text-sm text-gray-600">
                  Usa nuestras herramientas de comparaci√≥n para encontrar la
                  mejor opci√≥n
                </p>
              </div>
              <div class="bg-white rounded-lg p-4">
                <div class="text-3xl mb-2">üí≥</div>
                <h4 class="font-bold mb-2">Aplica con Cuidado</h4>
                <p class="text-sm text-gray-600">
                  Verifica los requisitos antes de aplicar para maximizar las
                  probabilidades de aprobaci√≥n
                </p>
              </div>
            </div>

            <div class="mt-8">
              <a href="/blog" class="btn btn-primary me-4"
                >Explorar M√°s Art√≠culos</a
              >
              <a href="/quiz" class="btn btn-outline-primary"
                >Repetir Cuestionario</a
              >
            </div>
          </div>

          <!-- Disclaimer -->
          <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <p class="text-sm text-gray-700">
              <strong>Descargo de responsabilidad:</strong> Las recomendaciones proporcionadas
              se basan en tus respuestas al cuestionario y en principios financieros
              generales. Siempre revisa los t√©rminos y condiciones de cualquier producto
              financiero antes de aplicar. Este sitio proporciona informaci√≥n imparcial
              pero no garantiza la aprobaci√≥n para ninguna tarjeta de cr√©dito.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
</Base>
