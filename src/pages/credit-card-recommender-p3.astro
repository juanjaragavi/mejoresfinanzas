---
import Base from "@/layouts/Base.astro";
import { Image } from "astro:assets";

const cards = [
  {
    name: "Amazon Rewards Visa",
    url: "/financial-solutions/amazon-rewards-visa-credit-card-benefits",
    reqUrl: "/financial-solutions/amazon-rewards-visa-credit-card-requirements",
    color: "#250E62",
    icon: "ðŸŒŸ",
  },
  {
    name: "Capital One Savor Rewards",
    url: "/financial-solutions/capital-one-savor-rewards-credit-card-benefits",
    reqUrl:
      "/financial-solutions/capital-one-savor-rewards-credit-card-requirements",
    color: "#250E62",
    icon: "ðŸŒŸ",
  },
  {
    name: "Chase Freedom Unlimited",
    url: "/financial-solutions/chase-freedom-unlimited-credit-card-benefits",
    reqUrl: "/financial-solutions/chase-freedom-unlimited-requirements",
    color: "#250E62",
    icon: "ðŸŒŸ",
  },
];

const selectedCard = cards[Math.floor(Math.random() * cards.length)];
---

<Base
  title="Descubre Tu Tarjeta de CrÃ©dito Ideal"
  meta_title="Recomendador de Tarjetas de CrÃ©dito - RevelaciÃ³n de Tarjeta"
  description="Encontrar la tarjeta adecuada es simple. Maximiza recompensas, organiza tus gastos y disfruta de beneficios exclusivos. Â¡Explora y elige la tarjeta ideal para ti!"
  image="/images/og-image.png"
>
  <section class="section pb-0">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-10 text-center">
          <div class="content">
            <h1 class="h2 mb-4">Descubre Tu Tarjeta de CrÃ©dito Ideal</h1>

            <p class="text-left text-lg text-dark mb-5">
              Encontrar la tarjeta adecuada es simple. Maximiza recompensas,
              organiza tus gastos y disfruta de beneficios exclusivos. Â¡Explora
              y elige la tarjeta ideal para ti!
            </p>

            <!-- Autozep Ad: us_site_1 -->
            <div
              id="us_site_1"
              class="min-w-auto flex justify-center items-center"
            >
            </div>

            <h2 class="text-lg leading-5 font-bold text-gray-800 mb-6">
              Â¿Por QuÃ© Elegir Nuestro Recomendador de Tarjetas de CrÃ©dito?
            </h2>

            <div class="space-y-1 mb-6">
              <div class="flex items-start">
                <div
                  class="flex-shrink-0 rounded-full bg-orange-500 w-6 h-6 flex items-center justify-center mr-2"
                >
                  <svg
                    class="w-4 h-4 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div class="text-lg">
                  <span class="ml-2 font-semibold text-dark"
                    >Opciones Personalizadas</span
                  >
                </div>
              </div>

              <div class="flex items-start">
                <div
                  class="flex-shrink-0 rounded-full bg-orange-500 w-6 h-6 flex items-center justify-center mr-2"
                >
                  <svg
                    class="w-4 h-4 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div class="text-lg">
                  <span class="ml-2 font-semibold text-dark"
                    >Completamente Gratis</span
                  >
                </div>
              </div>

              <div class="flex items-start">
                <div
                  class="flex-shrink-0 rounded-full bg-orange-500 w-6 h-6 flex items-center justify-center mr-2"
                >
                  <svg
                    class="w-4 h-4 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div class="text-lg">
                  <span class="ml-2 font-semibold text-dark"
                    >Asesoramiento Experto</span
                  >
                </div>
              </div>
            </div>

            <div id="card-reveal-section" class="my-8">
              <button
                id="reveal-card-button"
                class="btn btn-primary btn-lg w-full"
                style="background-color: #F97316; border-color: #F97316; color: white; border-radius: 50px;"
              >
                <div class="flex items-center justify-center space-x-2">
                  <span>Revela Tu Tarjeta Recomendada</span>
                  <div
                    class="bg-white rounded-full w-4 h-4 flex items-center justify-center"
                  >
                    <span class="text-orange-500 text-xs">ðŸŽ´</span>
                  </div>
                </div>
              </button>

              <div
                id="shuffling-container"
                class="hidden flex-col items-center space-y-4 mt-6"
              >
                <div class="flex space-x-2">
                  <div
                    class="shuffle-card w-16 h-24 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow-lg flex items-center justify-center"
                  >
                    <span class="text-white text-xl font-bold">?</span>
                  </div>
                  <div
                    class="shuffle-card w-16 h-24 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow-lg flex items-center justify-center"
                  >
                    <span class="text-white text-xl font-bold">?</span>
                  </div>
                  <div
                    class="shuffle-card w-16 h-24 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow-lg flex items-center justify-center"
                  >
                    <span class="text-white text-xl font-bold">?</span>
                  </div>
                </div>
                <p
                  id="shuffling-text"
                  class="text-sm text-gray-600 font-medium"
                >
                  Barajando tarjetas para encontrar tu pareja perfecta...
                </p>
              </div>

              <div id="revealed-card-container" class="hidden mt-6">
                <a
                  href={selectedCard.url}
                  class="btn btn-lg w-full rounded-full inline-flex items-center justify-center text-white font-medium"
                  style={`background-color: ${selectedCard.color}; border-color: ${selectedCard.color}; border-radius: 50px;`}
                >
                  <div class="flex items-center space-x-2">
                    <span>{selectedCard.icon} {selectedCard.name}</span>
                    <div
                      class="bg-white rounded-full w-4 h-4 flex items-center justify-center"
                    >
                      <span
                        class="text-xs"
                        style={`color: ${selectedCard.color}`}>â†’</span
                      >
                    </div>
                  </div>
                </a>
              </div>
            </div>

            <p class="text-left text-lg text-dark mb-4">
              Nuestras recomendaciones estÃ¡n diseÃ±adas para conectar tus metas
              financieras con tarjetas que se adapten a tus necesidades. Desde
              cashback hasta recompensas de viaje, te damos opciones claras y
              fÃ¡ciles de entender para que puedas tomar decisiones informadas.
            </p>

            <!-- Autozep Ad: us_site_2 -->
            <div
              id="us_site_2"
              class="min-w-auto flex justify-center items-center"
            >
            </div>

            <p class="text-left text-lg text-dark mb-5">
              Con nuestra guÃ­a, transformarÃ¡s tu tarjeta de crÃ©dito en una
              herramienta que simplifica tus finanzas y te ayuda a alcanzar tus
              metas sin complicaciones.
            </p>

            <div class="mt-6 mb-4">
              <a
                href="/financial-solutions/chase-freedom-unlimited-credit-card-benefits"
                class="btn btn-primary btn-lg w-full rounded-full inline-flex items-center justify-center"
                style="background-color: #F97316; border-color: #F97316; color: white; border-radius: 50px;"
              >
                <div class="flex items-center space-x-2">
                  <span>Nuestra Mejor RecomendaciÃ³n</span>
                  <div
                    class="bg-white rounded-full w-5 h-5 flex items-center justify-center"
                  >
                    <span class="text-orange-500 text-xs">â†’</span>
                  </div>
                </div>
              </a>
            </div>

            <p class="text-left text-lg mb-6">
              <a
                class="text-blue-500"
                href="/financial-solutions/chase-freedom-unlimited-requirements"
              >
                Aprende CÃ³mo Aplicar
              </a>
            </p>

            <!-- FAQ Section -->
            <div class="mt-6 mb-6 border rounded">
              <!-- FAQ Item 1: Benefits -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer border-b"
                data-faq="benefits"
              >
                <h3
                  class="faq-title font-medium text-lg leading-5 text-sky-600"
                >
                  Â¿CuÃ¡les son los beneficios de una tarjeta sin cuota anual?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-benefits-content"
              >
                <p class="text-left">
                  Una tarjeta sin cuota anual te ayuda a ahorrar en costos
                  recurrentes mientras disfrutas de beneficios clave como
                  cashback o puntos por compras.
                </p>
              </div>

              <!-- FAQ Item 2: Cashback -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer border-b"
                data-faq="cashback"
              >
                <h3
                  class="faq-title font-medium text-lg leading-5 text-sky-600"
                >
                  Â¿CÃ³mo funciona el cashback?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-cashback-content"
              >
                <p class="text-left">
                  Recibes un porcentaje de tus compras como dinero en efectivo
                  que puedes usar para reducir saldos o gastar como prefieras.
                </p>
              </div>

              <!-- FAQ Item 3: Travelers -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer border-b"
                data-faq="travelers"
              >
                <h3
                  class="faq-title font-medium text-lg leading-5 text-sky-600"
                >
                  Â¿CuÃ¡l es la mejor opciÃ³n para viajeros?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-travelers-content"
              >
                <p class="text-left">
                  Las tarjetas con acumulaciÃ³n de millas aÃ©reas o acceso a salas
                  VIP son ideales para viajeros frecuentes, permitiÃ©ndote
                  ahorrar en vuelos y disfrutar de beneficios exclusivos.
                </p>
              </div>

              <!-- FAQ Item 4: Online -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer"
                data-faq="online"
              >
                <h3
                  class="faq-title font-medium text-lg leading-6 text-sky-600"
                >
                  Â¿Es seguro usar tarjetas de crÃ©dito en lÃ­nea?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-online-content"
              >
                <p class="text-left">
                  SÃ­, muchas tarjetas ofrecen tecnologÃ­a avanzada como CVV
                  dinÃ¡mico y alertas instantÃ¡neas para proteger tus
                  transacciones.
                </p>
              </div>
            </div>

            <p class="text-left text-lg text-dark mb-8">
              Haz de tu tarjeta de crÃ©dito una aliada para alcanzar tus metas
              financieras. Desde cashback hasta recompensas de viaje, elige una
              opciÃ³n que simplifique tu vida y maximice tus beneficios. Explora
              nuestras recomendaciones y encuentra la tarjeta que mejor se
              adapte a ti.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
</Base>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const revealButton = document.getElementById("reveal-card-button");
    const shufflingContainer = document.getElementById("shuffling-container");
    const revealedCardContainer = document.getElementById(
      "revealed-card-container",
    );
    const shufflingText = document.getElementById("shuffling-text");
    let isShuffling = false;
    let cardRevealed = false;

    // FAQ functionality
    const faqButtons = document.querySelectorAll(".faq-button");
    let openFaq = "benefits"; // Default open

    // Open the benefits FAQ by default
    const defaultFaq = document.querySelector('[data-faq="benefits"]');
    const defaultContent = document.getElementById("faq-benefits-content");
    if (defaultFaq && defaultContent) {
      defaultContent.classList.remove("hidden");
      const defaultTitle = defaultFaq.querySelector(".faq-title");
      const defaultIcon = defaultFaq.querySelector(".faq-icon");
      if (defaultTitle) {
        defaultTitle.classList.add("text-green-500");
        defaultTitle.classList.remove("text-sky-600");
      }
      if (defaultIcon) {
        defaultIcon.classList.add("text-green-500", "transform", "rotate-180");
        defaultIcon.classList.remove("text-sky-700");
      }
    }

    faqButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const faqId = button.getAttribute("data-faq");
        if (!faqId) return;

        const content = document.getElementById(`faq-${faqId}-content`);
        const title = button.querySelector(".faq-title");
        const icon = button.querySelector(".faq-icon");

        if (openFaq === faqId) {
          // Close current
          if (content) content.classList.add("hidden");
          if (title) {
            title.classList.remove("text-green-500");
            title.classList.add("text-sky-600");
          }
          if (icon) {
            icon.classList.remove("text-green-500", "transform", "rotate-180");
            icon.classList.add("text-sky-700");
          }
          openFaq = "";
        } else {
          // Close previous
          if (openFaq) {
            const prevContent = document.getElementById(
              `faq-${openFaq}-content`,
            );
            const prevButton = document.querySelector(
              `[data-faq="${openFaq}"]`,
            );
            if (prevContent) prevContent.classList.add("hidden");
            if (prevButton) {
              const prevTitle = prevButton.querySelector(".faq-title");
              const prevIcon = prevButton.querySelector(".faq-icon");
              if (prevTitle) {
                prevTitle.classList.remove("text-green-500");
                prevTitle.classList.add("text-sky-600");
              }
              if (prevIcon) {
                prevIcon.classList.remove(
                  "text-green-500",
                  "transform",
                  "rotate-180",
                );
                prevIcon.classList.add("text-sky-700");
              }
            }
          }

          // Open new
          if (content) content.classList.remove("hidden");
          if (title) {
            title.classList.add("text-green-500");
            title.classList.remove("text-sky-600");
          }
          if (icon) {
            icon.classList.add("text-green-500", "transform", "rotate-180");
            icon.classList.remove("text-sky-700");
          }
          openFaq = faqId;
        }
      });
    });

    // Card reveal functionality
    if (revealButton && shufflingContainer && revealedCardContainer) {
      revealButton.addEventListener("click", () => {
        if (isShuffling || cardRevealed) return;

        isShuffling = true;

        // Hide button with animation
        revealButton.style.opacity = "0";
        revealButton.style.transform = "scale(0.8)";

        setTimeout(() => {
          revealButton.style.display = "none";
          shufflingContainer.classList.remove("hidden");

          // Start shuffle animation
          const shuffleCards =
            shufflingContainer.querySelectorAll(".shuffle-card");
          let shuffleCount = 0;
          const maxShuffles = 6; // 2 seconds worth of animation

          const shuffleInterval = setInterval(() => {
            shuffleCards.forEach((card, index) => {
              if (card instanceof HTMLElement) {
                const delay = index * 200;
                setTimeout(() => {
                  card.style.transform = `translateY(-10px) rotateY(180deg) scale(1.1)`;
                  setTimeout(() => {
                    card.style.transform = `translateY(0) rotateY(360deg) scale(1)`;
                  }, 400);
                }, delay);
              }
            });

            if (shufflingText) {
              shufflingText.style.opacity =
                shufflingText.style.opacity === "0.5" ? "1" : "0.5";
            }

            shuffleCount++;
            if (shuffleCount >= maxShuffles) {
              clearInterval(shuffleInterval);

              // Hide shuffling and show revealed card
              setTimeout(() => {
                shufflingContainer.classList.add("hidden");
                revealedCardContainer.classList.remove("hidden");
                revealedCardContainer.style.opacity = "0";
                revealedCardContainer.style.transform =
                  "scale(0.8) rotateY(180deg)";

                // Animate revealed card
                setTimeout(() => {
                  revealedCardContainer.style.transition = "all 0.8s ease";
                  revealedCardContainer.style.opacity = "1";
                  revealedCardContainer.style.transform =
                    "scale(1) rotateY(0deg)";
                }, 100);

                isShuffling = false;
                cardRevealed = true;
              }, 500);
            }
          }, 300);
        }, 500);
      });
    }
  });
</script>

<style>
  .btn {
    transition: all 0.3s ease;
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .shuffle-card {
    transition: transform 0.4s ease-in-out;
  }

  .faq-button {
    transition: all 0.3s ease;
  }

  .faq-icon {
    transition:
      transform 0.3s ease,
      color 0.3s ease;
  }

  .faq-title {
    transition: color 0.3s ease;
  }

  .faq-content {
    transition: all 0.3s ease;
  }

  /* Shuffling animation keyframes */
  @keyframes shuffleCard {
    0% {
      transform: translateY(0) rotateY(0) scale(1);
    }
    50% {
      transform: translateY(-10px) rotateY(180deg) scale(1.1);
    }
    100% {
      transform: translateY(0) rotateY(360deg) scale(1);
    }
  }

  /* Pulsing text animation */
  @keyframes pulseText {
    0%,
    100% {
      opacity: 0.5;
    }
    50% {
      opacity: 1;
    }
  }

  .shuffle-card:nth-child(1) {
    animation-delay: 0s;
  }

  .shuffle-card:nth-child(2) {
    animation-delay: 0.2s;
  }

  .shuffle-card:nth-child(3) {
    animation-delay: 0.4s;
  }

  /* Revealed card animation */
  @keyframes revealCard {
    from {
      opacity: 0;
      transform: scale(0.8) rotateY(180deg);
    }
    to {
      opacity: 1;
      transform: scale(1) rotateY(0deg);
    }
  }

  /* Ensure proper spacing and alignment */
  .space-y-1 > * + * {
    margin-top: 0.25rem;
  }

  .space-y-4 > * + * {
    margin-top: 1rem;
  }

  /* Mobile responsive adjustments */
  @media (max-width: 768px) {
    .btn {
      padding: 12px 20px;
      font-size: 0.875rem;
    }

    .text-lg {
      font-size: 1rem;
    }

    .text-2xl {
      font-size: 1.25rem;
    }

    .shuffle-card {
      width: 3.5rem;
      height: 5rem;
    }
  }
</style>
